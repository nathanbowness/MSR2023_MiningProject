{"url": "https://api.github.com/repos/palkan/isolator/releases/31811799", "assets_url": "https://api.github.com/repos/palkan/isolator/releases/31811799/assets", "upload_url": "https://uploads.github.com/repos/palkan/isolator/releases/31811799/assets{?name,label}", "html_url": "https://github.com/palkan/isolator/releases/tag/v0.7.0", "id": 31811799, "author": {"login": "palkan", "id": 1516722, "node_id": "MDQ6VXNlcjE1MTY3MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/1516722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/palkan", "html_url": "https://github.com/palkan", "followers_url": "https://api.github.com/users/palkan/followers", "following_url": "https://api.github.com/users/palkan/following{/other_user}", "gists_url": "https://api.github.com/users/palkan/gists{/gist_id}", "starred_url": "https://api.github.com/users/palkan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/palkan/subscriptions", "organizations_url": "https://api.github.com/users/palkan/orgs", "repos_url": "https://api.github.com/users/palkan/repos", "events_url": "https://api.github.com/users/palkan/events{/privacy}", "received_events_url": "https://api.github.com/users/palkan/received_events", "type": "User", "site_admin": false}, "node_id": "MDc6UmVsZWFzZTMxODExNzk5", "tag_name": "v0.7.0", "target_commitish": "master", "name": "0.7.0", "draft": false, "prerelease": false, "created_at": "2020-09-25T12:27:29Z", "published_at": "2020-09-25T12:54:35Z", "assets": [], "tarball_url": "https://api.github.com/repos/palkan/isolator/tarball/v0.7.0", "zipball_url": "https://api.github.com/repos/palkan/isolator/zipball/v0.7.0", "body": "This release brings two major features: multiple databases support and verbose output.\r\n\r\n## Multiple databases\r\n\r\nIsolator was designed years ago with the assumption that there is only one DB connection per thread exists (which is true when you have a single DB pool). Since Rails 6, multi-database applications became more popular and revealed that this original assumption wasn't good enough to last for ages.\r\n\r\nFor this release, we refactored the internals to track connections separately, thus, supporting multiple databases.\r\n\r\n**NOTE:** Although we tested this feature in multiple projects, there still could be some edge cases we're not aware of. Please, submit an issue if encounter problems with this release in your single- or multi-database application.\r\n\r\nThanks to @mquan and @bibendi for helping in implementing and testing this feature.\r\n\r\n## Debug output\r\n\r\nSometimes it's useful to know which actions initiated the transaction causing an Isolator exception. For that, you can now use a verbose logging feature of Isolator.\r\n\r\nTo enable Isolator logs, provide `ISOLATOR_DEBUG=true` environment variable or manually via `Isolator.debug_enabled` option, for example:\r\n\r\n```sh\r\n$ ISOLATOR_DEBUG=true bundle exec rspec\r\n\r\n[ISOLATOR DEBUG] Threshold value was changed for connection 47316728757800: 2\r\n[ISOLATOR DEBUG] Transaction opened for connection 47316728757800 (total: 1, threshold: 2)\r\n  \u21b3 /app/lib/testing/shared_contexts/shared_user.rb:7:in `block (2 levels) in <main>'\r\n...\r\n```\r\n\r\nBy default, `Rails.backtrace_cleaner` is used to filter the stacktrace. You can specify your own filter via `Isolator.backtrace_cleaner` option:\r\n\r\n```ruby\r\nIsolator.backtrace_cleaner = ->(locations) { locations.grep(/my_app/) }\r\n```\r\n\r\nYou can also change the number of stack trace lines to display via `ISOLATOR_BACKTRACE_LENGTH` environmental variable or manually via `Isolator.backtrace_length` option."}
{"url": "https://api.github.com/repos/palkan/isolator/releases/9734332", "assets_url": "https://api.github.com/repos/palkan/isolator/releases/9734332/assets", "upload_url": "https://uploads.github.com/repos/palkan/isolator/releases/9734332/assets{?name,label}", "html_url": "https://github.com/palkan/isolator/releases/tag/v0.1.0", "id": 9734332, "author": {"login": "palkan", "id": 1516722, "node_id": "MDQ6VXNlcjE1MTY3MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/1516722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/palkan", "html_url": "https://github.com/palkan", "followers_url": "https://api.github.com/users/palkan/followers", "following_url": "https://api.github.com/users/palkan/following{/other_user}", "gists_url": "https://api.github.com/users/palkan/gists{/gist_id}", "starred_url": "https://api.github.com/users/palkan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/palkan/subscriptions", "organizations_url": "https://api.github.com/users/palkan/orgs", "repos_url": "https://api.github.com/users/palkan/repos", "events_url": "https://api.github.com/users/palkan/events{/privacy}", "received_events_url": "https://api.github.com/users/palkan/received_events", "type": "User", "site_admin": false}, "node_id": "MDc6UmVsZWFzZTk3MzQzMzI=", "tag_name": "v0.1.0", "target_commitish": "master", "name": "0.1.0 (alpha)", "draft": false, "prerelease": false, "created_at": "2018-02-19T13:20:22Z", "published_at": "2018-02-19T13:23:54Z", "assets": [], "tarball_url": "https://api.github.com/repos/palkan/isolator/tarball/v0.1.0", "zipball_url": "https://api.github.com/repos/palkan/isolator/zipball/v0.1.0", "body": "Initial release with basic functionality:\r\n- HTTP watchers (though [Sniffer](https://github.com/aderyabin/sniffer))\r\n- Background jobs watchers for ActiveJob and Sidekiq\r\n- [Mail](https://github.com/mikel/mail) gem watcher (detects emails delivery)\r\n- WebMock integration.\r\n"}
